import{g as r,r as c,o as n,e as d,a as o,u as p,w as f,F as S,X as w,b as l,f as B,h as L,i as q,c as y,d as g,t as h}from"./app-2c521372.js";import{_ as H}from"./AdminLayout-5b0026d9.js";import{I as N}from"./rules-bcd4dbe1.js";import"./sweetalert2.all-c32728c7.js";import{u as P}from"./store-c7613b76.js";const R={key:2,class:"harvey"},A=l("strong",null,[g("Donna: "),l("br")],-1),F={key:3,class:"user"},U=l("br",null,null,-1),X=["value"],J={__name:"Donna",props:{canLogin:Boolean,canRegister:Boolean,laravelToken:String},setup(M){const s=P(),j=function(a){return{message:{pt:"Mensagem",en:"Message",es:"Mensaje"}}[a][s.lang]},i=r(),u=r(""),v=r([]),_=r();r(!1),r("snackbar!");let m=new XMLHttpRequest;m.onload=function(){v.value=JSON.parse(m.responseText),_.value=v.value[0].value},m.open("get","/admin/donna/getProjetos"),m.send();const x=()=>{s.setChatStatus(!0),s.setUserMessage("donna",u.value),setTimeout(function(){i.value.scrollTop=i.value.scrollHeight});let a=new FormData(document.querySelector(".chat-send"));a.append("message",u.value),a.append("lang",s.lang);let e=new XMLHttpRequest;e.onload=function(){s.setAssistantMessage("donna",e.responseText),s.setChatStatus(!1),setTimeout(function(){i.value.scrollTop=i.value.scrollHeight})},e.open("POST",route("donna-message")),e.send(a),u.value=""},T=function(a){api.setClientChatSubject(a).then(e=>{s.setAssistantMessage("atendimento-message",e.data),s.setChatStatus(!1)})};return(a,e)=>{const C=c("v-select"),b=c("v-container"),k=c("v-avatar"),V=c("v-text-field"),D=c("v-btn");return n(),d(S,null,[o(p(w),{title:"Donna"}),o(H,{title:"Donna"},{default:f(()=>[o(b,{class:"w-100 pa-7 bg-dialog",id:"atendimentoChatProjectSelect"},{default:f(()=>[o(C,{"prepend-inner-icon":"mdi-folder-cog",label:"Selecione o Projeto",items:v.value,modelValue:_.value,"onUpdate:modelValue":[e[0]||(e[0]=t=>_.value=t),T]},null,8,["items","modelValue"])]),_:1}),o(b,{class:"chat"},{default:f(()=>[l("div",{class:L({chatMessages:!0,loading:p(s).chatLoading}),ref_key:"messages",ref:i},[(n(!0),d(S,null,B(p(s).donnaMessages,t=>(n(),d("div",{class:"chatMessage",key:t.key},[t.user=="Donna"?(n(),y(k,{key:0,class:"mr-2 mt-3",image:"/img/donna-profile.jpg"})):(n(),y(k,{key:1,class:"mr-2 mt-3",image:"/img/user-profile.jpg"})),t.user=="Donna"?(n(),d("p",R,[A,g(" "+h(t.message),1)])):(n(),d("p",F,[l("strong",null,[g(h(t.user)+": ",1),U]),g(" "+h(t.message),1)]))]))),128))],2),l("form",{onSubmit:e[2]||(e[2]=q(t=>x(),["prevent"])),class:"chat-send"},[l("input",{type:"hidden",name:"_token",value:M.laravelToken},null,8,X),o(V,{variant:"underlined","prepend-inner-icon":"mdi-message",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),label:j("message"),rules:[p(N).required],required:""},null,8,["modelValue","label","rules"]),o(D,{type:"submit",icon:"mdi-send",size:"large",variant:"plain"})],32)]),_:1})]),_:1})],64)}}};export{J as default};
