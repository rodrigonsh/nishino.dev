import{k as _,r as i,o as t,c as g,w as f,a as u,u as c,X as x,b as n,h as d,i as S,F as C,n as H,e as B,d as m,t as p}from"./app-ef9ccb1a.js";import{I as L}from"./rules-bcd4dbe1.js";import{u as R,_ as V}from"./GuestLayout-5acdd6f3.js";import"./sweetalert2.all-4f7856fc.js";const w={key:2,class:"harvey"},q=n("strong",null,[m("Harvey Wood: "),n("br")],-1),F={key:3,class:"user"},N=n("br",null,null,-1),W=["value"],I={__name:"Chat",props:{canLogin:Boolean,canRegister:Boolean,laravelToken:String},setup(h){const a=R(),y=function(o){return{message:{pt:"Mensagem",en:"Message",es:"Mensaje"}}[o][a.lang]},l=_(),r=_(""),k=()=>{a.setChatStatus(!0),a.setUserMessage(r.value),setTimeout(function(){l.value.scrollTop=l.value.scrollHeight});let o=new FormData(document.querySelector("#send"));o.append("message",r.value),o.append("lang",a.lang);let e=new XMLHttpRequest;e.onload=function(){a.setAssistantMessage(e.responseText),a.setChatStatus(!1),setTimeout(function(){l.value.scrollTop=l.value.scrollHeight})},e.open("POST",route("message")),e.send(o),r.value=""};return(o,e)=>{const v=i("v-avatar"),b=i("v-text-field"),M=i("v-btn"),T=i("v-container");return t(),g(V,{canLogin:"canRegister",canRegister:"canRegister",title:"Harvey",customClass:"chat"},{default:f(()=>[u(c(x),{title:"Fale conosco"}),u(T,{id:"chat"},{default:f(()=>[n("div",{class:H({chatMessages:!0,loading:c(a).chatLoading}),ref_key:"messages",ref:l},[(t(!0),d(C,null,S(c(a).chatMessages,s=>(t(),d("div",{class:"chatMessage",key:s.key},[s.user=="Harvey Wood"?(t(),g(v,{key:0,class:"mr-2 mt-3",image:"/img/harvey-profile.png"})):(t(),g(v,{key:1,class:"mr-2 mt-3",image:"/img/user-profile.jpg"})),s.user=="Harvey Wood"?(t(),d("p",w,[q,m(" "+p(s.message),1)])):(t(),d("p",F,[n("strong",null,[m(p(s.user)+": ",1),N]),m(" "+p(s.message),1)]))]))),128))],2),n("form",{onSubmit:e[1]||(e[1]=B(s=>k(),["prevent"])),id:"send"},[n("input",{type:"hidden",name:"_token",value:h.laravelToken},null,8,W),u(b,{variant:"underlined","prepend-inner-icon":"mdi-message",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),label:y("message"),rules:[c(L).required],required:""},null,8,["modelValue","label","rules"]),u(M,{type:"submit",icon:"mdi-send",size:"large",variant:"plain"})],32)]),_:1})]),_:1})}}};export{I as default};
